<!DOCTYPE html>
<html lang="en" data-ng-app="expensesApp">
  <head>
    <title>Expenses</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>-->
    <script src="lib/jquery-ui-1.10.3.custom/js/jquery-1.9.1.js"></script>
    <script src="lib/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular-resource.min.js"></script>
    <script src="lib/moment.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/library.js"></script>
    <script src="js/controllers/expensesCtrl.js"></script>
    <script src="js/services/expensesService.js"></script>
    <script src="js/services/categoriesService.js"></script>
    <script src="js/apps/expensesApp.js"></script>
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="lib/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
    <link href="lib/jquery-ui-1.10.3.custom/css/ui-lightness/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" media="screen">
    <style>
      .hero-unit {
        text-align: right;
        padding: 20px;
      }
      .hero-unit h1 {
        font-size: 1.75em;
        margin: 10px;
      }
      .input-prepend input {
        width: 180px;
      }
      td.action {
        min-width: 3em;
      }
    </style>
  </head>
  <body data-ng-controller="ExpensesController" data-ng-init="init()">
    <div class="hero-unit">
      <h1>Expenses</h1>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab">Expenses</a></li>
            <li><a href="#" data-toggle="tab">Categories</a></li>
          </ul>
        </div>
      </div>
      <div class="row-fluid">

        <!--Sidebar content-->
        <div class="span3">
          <form class="" data-ng-submit="addExpense()">
            <fieldset>
              <div class="control-group">
                <label class="control-label" for="inputDate">Date</label>
                <div class="controls">
                  <input class="span12" type="text" id="inputDate" data-ng-model="expense.date">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="selectCategory">Category</label>
                <div class="controls">
                  <select class="span12" id="selectCategory" data-ng-model="expense.category_id">
                    <option data-ng-repeat="category in categoriesData | orderBy: 'category'" value="{{category.id}}">{{category.category}}</option>
                  </select>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="inputDescription">Description</label>
                <div class="controls">
                  <textarea class="span12" id="inputDescription" data-ng-model="expense.description"></textarea>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="inputPrice">Price</label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on">$</span>
                    <input type="text" id="inputPrice" placeholder="price" data-ng-model="expense.cost">
                  </div>
                </div>
              </div>
              <div class="control-group">
                <div class="controls">
                  <button type="submit" class="btn btn-primary" type="button" data-ng-disabled="!(expense.category_id && expense.description && expense.cost)">Add expense</button>
                </div>
              </div>
            </fieldset>
          </form>
        </div> <!-- .row3 -->
    
        <!--Body content-->
        <div class="span6">
          <table class="table table-striped">
            <tr>
              <th>Date</th>
              <th>Category</th>
              <th>Description</th>
              <th colspan="2">Price</th>
            </tr>

            <tr data-ng-repeat="expense in expensesData | orderBy: 'date':true">
              <td>{{timeAgo( expense.date )}}</td>
              <td>{{getExpense( expense.category_id )}}</td>
              <td>{{expense.description}}</td>
              <td>${{expense.cost}}</td>
              <td class="action"><i class="icon-edit"></i> <i class="icon-remove"></i></td>
            </tr>
          </table>
        </div> <!-- .span6 -->

        <div class="span3">
          <div class="well">
            [chart, last 7 days]
          </div>
          <div class="well">
            [chart, last 5 weeks]
          </div>
          <div class="well">
            [chart, last 6 months]
          </div>
        </div> <!-- .span3 -->
      </div> <!-- .row-fluid -->
    </div> <!-- .container-fluid -->
  </body>
</html>
